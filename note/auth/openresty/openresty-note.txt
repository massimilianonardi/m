
- auth-keycloak: kc + postgres
- auth-proxy: apisix + etcd
- auth: microservices -> html, js, resources + java-db + java-file-manager + geoserver
apache, php, postgres, java, geoserver, wildfly

microservices + postgres bound on 127.0.0.1 on auth-proxy guarrantees secure access and do not require additional https connection and firewall rules for bidirectional communication
integrate keycloak: geoserver, gitlab, headless cms
rest api to create resources and permissions on keycloak, thus it is possible to use sh functions to create dynamically apisix routes and keycloak resources/permissions
every postgres instance for each user (keycloak, geoserver, mapserver, java-service, etc.)

production servers:
auth-keycloak -> keycloak (dmz -> intranet domain controller)
apisix auth-proxy -> apps (dmz -> intranet microservices)
auth -> multiple servers + microservices (intranet) -> gis (postgres, raster files, mapserver, multiple geoserver), db (postgres, java-db), file (gluster?), war (wildfly), src (gitlab)

apisix on port 443 an remove any http socket, decoupled deployment, protect admin port access, protect dashboard allowing access only from selected intranet ips, coraza plugin
https://apisix.apache.org/docs/apisix/deployment-modes/

keycloak on port 443, decouple admin rest from login flows, put behind reverse proxy to achieve that?

Roundcube Webmail keycloak
