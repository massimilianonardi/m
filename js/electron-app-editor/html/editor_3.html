<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Electron App</title>
    <link rel="stylesheet" href="style/editor_3.css">
    <script src="js/main.js"></script>
  </head>
  <body>

    <a href="index.html">index</a>


<h1>Gutter Line Numbers Experiment</h1>
<h2>[Unfinished pen, There is bug, can you discover it :) ?]</h2>
<div class="editor">
  <div class="gutter"><span>1</span></div>
  <textarea rows="5"></textarea>
</div>

  </body>

    <script>
/**
 * TODO:
 *
 * (1) Create a whole row on the editor to represent the line
 * rather than adding gutter numbers (to fix text overflow problem).
*/
const input = document.querySelector('textarea');
const gutter = document.querySelector('.gutter');
let val = input.value;
let numOfLines = 1;

function update(e) {
	val = input.value;

	let lineBreaks = val.match(/\n/gi) || [];
	let numOfSpans = gutter.childElementCount;
	numOfLines = lineBreaks.length ? lineBreaks.length + 1 : 1;

	gutter.innerHTML = ""
	for(var i = 0; i < numOfLines; i++) {
		console.log('creating no', i)
		var el = document.createElement('span');
		el.innerHTML = i+1;
		gutter.appendChild(el);
	}
}

input.addEventListener('input', update);
    </script>
</html>
